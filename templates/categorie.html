<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forum - {{.Category.Name}}</title>
   <link rel="stylesheet" href="./forum.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
      <div class="logo-section">
        <div class="logo"></div>
        <div class="title">TITLE</div>
      </div>
      <nav class="nav-section">
        <a href="profil.html" class="nav-link">profil</a>
        <a href="home.html" class="nav-link">Home</a>
        <a href="categorie.html" class="nav-link">Categories</a>
        <input type="text" class="search-box" placeholder="search" />
        <button class="login-btn" onclick="openRegisterModal()">
          login/register
        </button>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h3>New Posts</h3>
            <a href="#" class="sidebar-item">&gt; sujet</a>
            <a href="#" class="sidebar-item">&gt; sujet</a>
            <a href="#" class="sidebar-item">&gt; sujet</a>
        </aside>

        <!-- Posts Section -->
        <section class="posts-section">
            {{range .Category.Topics}}
            <div class="post-card">
                <div class="post-avatar"></div>
                <div class="post-content">
                    <div class="post-title">{{.Name}}</div>
                    <div class="post-text">{{preview (index .Messages 0).Content 300}}</div>
                    <div class="post-author">{{(index .Messages 0).Author}}</div>
                </div>
                <a class="post-button" href="t{{.topicID}}">Ouvrir</a>
            </div>
            {{end}}

        </section>
    </main>

    <!-- Modal de connexion -->
    <div id="loginModal" class="modal">
     {{template "loginModal" .Message}}
    </div>

    <script>
     {{if .ShowLogin}}
      document.getElementById("loginModal").style.display = "block";
      {{end}}
    </script>

  </body>
</html>
