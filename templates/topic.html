<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Informations page (css, sript, etc) -->
    {{template "InitPage"}}
    <title>Forum - {{.Topic.Name}}</title>
</head>
<body>
    <!-- Header -->
   {{template "ForumHeader"}}

<!-- Main Content -->
<main class="main-content">
  <!-- Posts Section -->
   <button class="respond-btn" onclick="showResponseBox(this)">R√©pondre</button>
   
        <section class="posts-section">
            <h2>{{.Topic.Name}}</h2>
            {{range .Topic.Messages}}
            <div class="post-card">
                <div class="post-avatar">{{.Author.ProfilPic}}</div>
                <div class="post-content">
                    <div class="post-title">{{.Author.Username}}</div>
                    <div class="post-text">{{.Content}}</div>
                </div>

                <div class="post-actions">
                    <button class="action-btn" onclick="toggleLike(this)">
                        <span>üëç</span>
                        <span>{{.Likes}}</span>
                    </button>
                    <button class="action-btn" onclick="toggleDislike(this)">
                        <span>üëé</span>
                        <span>{{.Dislikes}}</span>
                    </button>
                    
                </div>
            </div>
            {{end}}

        </section>
        </main>
    </div>

    <!-- Modal de r√©ponse -->
   {{template "ReponseBox"}}

     

    <script>       
        // Animation au scroll
        window.addEventListener('scroll', () => {
            const posts = document.querySelectorAll('.post');
            posts.forEach(post => {
                const rect = post.getBoundingClientRect();
                if (rect.top < window.innerHeight && rect.bottom > 0) {
                    post.style.opacity = '1';
                    post.style.transform = 'translateY(0)';
                }
            });
        });

        // Recherche en temps r√©el (simulation)
        document.querySelector('.search-bar').addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            const posts = document.querySelectorAll('.post');
            
            posts.forEach(post => {
                const content = post.querySelector('.post-content').textContent.toLowerCase();
                const username = post.querySelector('.username').textContent.toLowerCase();
                
                if (content.includes(query) || username.includes(query) || query === '') {
                    post.style.display = 'block';
                } else {
                    post.style.display = 'none';
                }
            });
        });

    </script>
</body>
</html>
